# gcc  



## gcc编译程序四步骤  

预处理————>编译—————>汇编————>链接   

### 预处理  

指令： gcc -E

hello.c————>hello.i

* 展开宏  头文件  
* 替换条件编译  
* 删除注释  空行  空白   

###  编译  

指令： gcc -S

hello.i————>hello.s  

* 检查语法规范  
    * 是否有拼写错误
    * 是否少了匹配括号  

* 消耗时间、系统资源最多  因此想提高编译效率主要从这一步骤入手   


### 汇编  

指令： gcc -c

hello.s————>hello.o  

将汇编指令(hello.s) **翻译**成机器指令 (hello.o)  

### 链接  

指令： gcc  (无参数，注意 -o是指定生成文件的名字)

hello.o————>a.out  

* 数据段合并
* 地址回填  

### 指令生成文件名字  

-o 文件名  


## 常用指令  

### -I 指定头文件  

当头文件与源码不在同一目录下时，源文件包含自定义的头文件会找不到，编译时可以指定  

gcc -I 头文件目录位置 hello.c -o hello  
-I参数放在最后也可以且大写I与后面目录直接可以不加空格(但一般会加)    

###  -c  只做 预处理、编译、汇编  

同理，
gcc hello.c -E hello.i  只做预处理  
gcc hello.c -S hello.s  只做预处理、编译两个步骤  
前两个很少用

gcc hello.c -c  hello.o **做了预处理、编译、汇编   得到的.o文件是一个二进制文件**  

### -g 编译时添加调试文件/语句  

加上该参数，编译的程序可以调试
gcc hello.c -o hello1
gcc hello.c -o hello2 -g  

ls -l （ll）查看，两个文件大小不一样  hello2要大  

#### gdb调试  

**hello2才可使用gdb进行调试，否则无法使用gdb进行调试**    









