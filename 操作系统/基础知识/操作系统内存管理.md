# 操作系统内存管理  


##  内存碎片  

**外部碎片**：在分配单元间的未使用的内存  
**内存碎片**：在分配单元内的未使用的内存  

## 内存管理方法  
* 当一个程序准许运行在内存中时，分配一个连续的区间  
* 分配一个连续的内存区间给运行的程序以访问数据  

### 分配策略  
* 首次适配  
* 最优适配  
* 最差适配  

#### 首次适配算法/第一匹配分配  
为了分配n字节，使用第一个可用的空闲块以致块的尺寸比n大  

**基本原理&实现*  

**需求**  
* 按地址排序的空闲块的列表  
* 分配需要寻找一个合适的分区  
* 重分配需要检查，看是否自由分区能合并于相邻的空闲分区（如果有的话）  

**优势**  
* 简单  
* 易于产生更大空闲块（如果前面已经找到合适的空闲块，就不需要破坏后面可能存在的更大的空闲块）

**劣势**  
* 容易产生外部碎片  第一次找到一个空闲块，并没有全部利用，下一次可能找到的是下一个空闲块，因为上一个空间可能不够了  
* 不确定性


#### 最优适配  
* 为了分配n个字节，使用最小的可用空闲块，以致块的尺寸比n大  

**基本原理&实现**  

* 为了避免分割大空闲块
* 为了最小化外部碎片产生的尺寸  

**需求**  
* 按尺寸排列的空闲块列表  
* 分配需要寻找一个合适的分区
* 重分配需要搜索及合并于相邻的空闲分区（如果有的话）  

















