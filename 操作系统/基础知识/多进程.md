# 多进程  

操作系统的main函数最后会fork()一个进程，shell(windows桌面)  shell再启动其他进程(shell代码就是一个死循环一直等待用户输入的指令)  

## 多进程如何组织  

## PCB(Process Control Block)  

PCB：用来记录进程信息的数据结构  
将多个进程的PCB分别放在不同的地方，操作系统管理  有一个进程正在执行，一部分在等待(PCB放在就绪队列)，一部分在等待某事件来触发(磁盘等在队列)  

把进程根据状态分类，方便管理  

### 多进程的组织——PCB+状态+队列  

操作系统如何组织多进程：将进程的PCB放在不同的队列中，用状态来推进多个进程  

#### 进程状态图  

![image](https://user-images.githubusercontent.com/58176267/155971537-e05ed292-dfe6-4276-b539-64d95b1a77b1.png)

## 多进程如何交替  

例子：
![image](https://user-images.githubusercontent.com/58176267/155972500-d2667bed-2dcc-4d36-9701-6087a17ca940.png)

### 多进程交替的三个部分———队列操作+调度+切换  

#### 进程调度    

**进程调度**是一个很值得研究的话题，最基本的策略： 
* FIFO 很公平的策略 但没有考虑进程执行的任务的区别  
* Priority  优先级该怎么设定 可能会使某些进程饥饿  

#### 进程切换  

* 上一个执行的进程的执行现场需要保存下来，将物理CPU中的重要信息保存在一个结构体内(PCB)，**具体做法就是将CPU中的一些寄存器的值保存在这个结构体中**  
* 进程调度将要执行的进程选择出来后,即将执行的进程的PCB内数据赋值给CPU，CPU自然就知道这个进程原来的一些信息
* 要完成这样的进程切换，需要用汇编代码实现精细的控制  




